{% extends "dashboard.html" %}
{% load add_class %}

{% block content %}
    <div class="flex items-start justify-center">
        <div class="w-full space-y-4">
            <h1 class="opacity-50">Documents > {% if form.instance.id %}Update{% else %}Create{% endif %}</h1>

          <div class="my-6 mx-auto">
              <form class="max-w-md space-y-6" enctype="multipart/form-data" method="POST">
                  {% csrf_token %}
                  <div class="space-y-6">
                    <div>
                        <p class="font-medium">
                            Name:
                        </p>
                        {{ form.name|add_class:"form-control form-block" }}
                    </div>
                    {% if form.instance.headers %}
                    <div>
                        <p class="font-medium">
                            Headers:
                        </p>
                        <ul>
                            {% for header in form.instance.headers %}
                            <li class="list-decimal list-inside">{{ header }}</li>
                            {% endfor %}
                        </p>
                    </div>
                    {% endif %}
                    <div>
                        <p class="font-medium">
                            Upload file (.csv, .xls, .xlsx):
                        </p>
                        {% if form.instance.file %}
                        <p class="text-sm mb-2">
                            Current file:
                            <a class="text-link inline text-indigo-500"
                                href="{{ form.instance.file.url }}">{{ form.instance.file }}</a>
                        </p>
                        {% endif %}

                        {{ form.file|add_class:"form-control form-block" }}
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                      <input
                          type="submit"
                          value="{% if form.instance.id %}Update{% else %}Create{% endif %}"
                          class="btn-primary">

                      {% if form.instance.id %}
                        <a href="{% url 'document:editor' form.instance.id %}" class="btn-success">
                            Edit layout
                        </a>
                      {% endif %}
                  </div>
              </form>
          </div>
        </div>
    </div>
{% endblock %}
